<!DOCTYPE html>
<html>
<head>
    
   <meta charset = "UTF-8">
   <title>tool tools</title>
    <meta name ="google-signin-client_id" content="305154557254-gea4ckhdmp8lnj7q8rdsg6kusfbjjedp.apps.googleusercontent.com">
   <link rel = "stylesheet" href = "/data/style/login2.css" type = "text/css"></link>
</head>
<body>
    <style>
        div {
            text-align: center;
        }
    </style>
   
      <div>
        <br><br><br>
      <img  src="/data/img/tool.png" width = "200" height = "200">
      <p id = "text1">&nbsp;툴들을 한번에
      <br>&nbsp;간편하고 쉽게, 툴툴 ! </p>
      <p id = "text2"> <br>&nbsp;지금 로그인해서 보다 더 
      <br>&nbsp;간편하게 툴툴을 사용해보세요.
        <br>&nbsp;툴툴은 언제나 당신을 환영합니다.</p>
        
        
        <img src ="/data/img/line.png"width = "400" >
        <br> 
 

        <p id = "button"> 
         
            <img src ="/data/img/kakao.png" onclick = "kakaoLogin();" width = "500" height = "75">
      
        </p>
                <!-- 카카오 스크립트 -->
   <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
   <script>
      Kakao.init('019cd36fcee2ee64a5bb70b7a4bcd090'); //발급받은 키 중 javascript키를 사용해준다.
      console.log(Kakao.isInitialized()); // sdk초기화여부판단
      
      //카카오로그인
      function kakaoLogin() {
       Kakao.Auth.login({
            success: function (response) {
              Kakao.API.request({
                   url: '/v2/user/me',
                   success: function (response) {
                      console.log(response)
                      },
                   fail: function (error) {
                     console.log(error)
                      },
                 })
               },
            fail: function (error) {
           console.log(error)
            },
       })
     }
   </script>
  
        
<!-- ////////////////////////////////////////////////////////// -->

        
   

    <p id="GgCustomLogin">
     <a href="javascript:void(0)">
         <img src = "/data/img/google.png" onclick = " onSignIn();" width = "500" height = "75"></a>
     </a>
    </p>


   <script>

   //처음 실행하는 함수
   function init() {
      gapi.load('auth2', function() {
         gapi.auth2.init();
         options = new gapi.auth2.SigninOptionsBuilder();
         options.setPrompt('select_account');
              // 추가는 Oauth 승인 권한 추가 후 띄어쓰기 기준으로 추가
         options.setScope('email profile openid https://www.googleapis.com/auth/user.birthday.read');
           // 인스턴스의 함수 호출 - element에 로그인 기능 추가
           // GgCustomLogin은 li태그안에 있는 ID, 위에 설정한 options와 아래 성공,실패시 실행하는 함수들
         gapi.auth2.getAuthInstance().attachClickHandler('GgCustomLogin', options, onSignIn, onSignInFailure);
      })
   }

   function onSignIn(googleUser) {
      var access_token = googleUser.getAuthResponse().access_token
      $.ajax({
          // people api를 이용하여 프로필 및 생년월일에 대한 선택동의후 가져온다.
         url: 'https://people.googleapis.com/v1/people/me'
           // key에 자신의 API 키를 넣습니다.
         , data: {personFields:'birthdays', key:'AIzaSyBD32tVivk207o4dHV1QCX1_o77MD74u7U', 'access_token': access_token}
         , method:'GET'
      })
      .done(function(e){
           //프로필을 가져온다.
         var profile = googleUser.getBasicProfile();
         console.log(profile)
      })
      .fail(function(e){
         console.log(e);
      })
   }
   function onSignInFailure(t){      
      console.log(t);
   }
   </script>
   
   <script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>

      <br>
</div>
</body>
</html>
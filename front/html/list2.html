<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TOOL TOOLS</title>
    <link href="../data/style/list2.css" rel="stylesheet" />
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script src="../js/fruits.js"></script>
    <script src="../js/list.js"></script>
  </head>

  <body>
    <div class="header">
      <div class="header-item">
        <a href="select3.html">
          <img src="../data/img/logo.png" class="logo" />
        </a>
      </div>

      <div class="detail-search">
        <form>
          <input
            type="text"
            class="search"
            placeholder="     Ïñ¥Îñ§ Ïõπ ÏÇ¨Ïù¥Ìä∏Î•º Ï∞æÍ≥† Í≥ÑÏã†Í∞ÄÏöî?üßê"
          />
          <input
            type="submit"
            name="submit"
            value="Í≤ÄÏÉâ"
            style="width: 50px; height: 35px"
          />
        </form>
      </div>
    </div>

    <div class="login">
      <a
        href="./login.html"
        style="color: aliceblue; text-decoration-line: none"
      >
        Î°úÍ∑∏Ïù∏ <br
      /></a>
    </div>

    <h2></h2>

    <div class="content-box">
      <ul>
        <!-- JSON Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨ÏôÄÏÑú HTMLÎ°ú Î≥ÄÌôò -->
        <script>
          $(document).ready(function () {
            var filter = localStorage.getItem("filter");
            var selectedTags = filter.split(", ");

            $.getJSON("../data/sitelink.json", function (data) {
              $("ul").empty(); // Í∏∞Ï°¥ Í≤∞Í≥º Ï†úÍ±∞

              var matchingData = data.filter(function (value) {
                var hashtags = value.hashtag.split(", ");
                return selectedTags.every(function (tag) {
                  return hashtags.includes(tag);
                });
              });

              if (matchingData.length > 0) {
                $.each(matchingData, function (key, value) {
                  var tags = value.hashtag.split(", ");
                  var tagBlocks = tags
                    .map(function (tag) {
                      return "<div class='tag'>" + tag + "</div>";
                    })
                    .join("");

                  var listItem =
                    "<li><div class='item-number'>" +
                    (key + 1) +
                    "</div><strong class='title-text'></strong> <a href='" +
                    value.con +
                    "' class='title-text'>" +
                    value.title +
                    "</a><br><strong class='link-text'></strong> <a href='" +
                    value.link +
                    "' class='link-text'>" +
                    value.link +
                    "</a><br><strong></strong> " +
                    tagBlocks +
                    "</li>";
                  $("ul").append(listItem);
                });
              } else {
                // Ïù¥ÎØ∏ÏßÄ Ï∂îÍ∞ÄÎ•º ÏúÑÌïú div Î∞è Ïä§ÌÉÄÏùº ÏÑ§Ï†ï
                var noDataContainer = document.createElement("div");
                noDataContainer.style.display = "flex";
                noDataContainer.style.justifyContent = "center";
                noDataContainer.style.alignItems = "center";
                noDataContainer.style.height = "400px";
                var img = document.createElement("img");
                img.src = "../data/img/nodata.jpg";
                img.alt = "No Data Image";
                img.style.width = "400px";
                noDataContainer.appendChild(img);
                $("ul").append(noDataContainer);
              }
            });
          });
        </script>
      </ul>
    </div>
  </body>
</html>

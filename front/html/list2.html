<!DOCTYPE html>
<html>
<head>
	<title>Search Results</title>
	<style>
		table {
		  border-collapse: collapse;
		  width: 100%;
		}

		th, td {
		  text-align: left;
		  padding: 8px;
		  border-bottom: 1px solid #ddd;
		}

		tr:hover {background-color: #f5f5f5;}
	</style>
</head>
<body>

	<h2>Search Results</h2>

	<table>
		<tr>
			<th>Title</th>
			<th>Link</th>
			<th>Detail</th>
			<th>Hashtag</th>
		</tr>

		<!-- JSON 데이터를 불러와서 HTML로 변환 -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script>
		  $(document).ready(function() {
			var filter = localStorage.getItem("filter"); // 검색어를 localStorage에서 가져옴
			var selectedTags = filter.split(", "); // 선택한 해시태그를 쉼표와 공백으로 분리하여 배열로 만듦
		
			$.getJSON("sitelink.json", function(data) {
			  $.each(data, function(key, value) {
				var hashtags = value.hashtag.split(", "); // 해시태그를 쉼표와 공백으로 분리하여 배열로 만듦
				var isMatched = selectedTags.every(function(tag) {
				  return hashtags.includes(tag); // 선택한 모든 해시태그가 항목의 해시태그에 포함되어야 함
				});
		
				if (isMatched && selectedTags.every(tag => hashtags.includes(tag))) {
				  $("table").append("<tr><td>" + value.title + "</td><td><a href='" + value.link + "'>" + value.link + "</a></td><td>" + value.detail + "</td><td>"  + value.hashtag + "</td></tr>");
				}
			  });
			});
		  });
		</script>
		
		
		

		  

	</table>

</body>
</html>

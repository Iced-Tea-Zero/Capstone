<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TOOL TOOLS</title>
    <link rel="icon" type="image/png" href="favicon.png"/>
    <link rel="stylesheet" href="../data/style/select2.css" type="text/css" />
    <script src = "../js/fruits.js"></script>
  </head>
  <body>
    <div class="header">
      <div class="header-item">
        <img src="../data/img/logo.png" class="logo" />
      </div>

      <div class="detail-search">
        <form>
          <input
            type="text"
            class="search"
            id="searchInput"
            placeholder="     어떤 웹 사이트를 찾고 계신가요?🧐"
          />
          <input
            type="submit"
            name="submit"
            value="검색"
            style="width: 50px; height: 35px"
          />
        </form>

      </div>
      <script>
        function searchFruits() {
          const searchInput = document.getElementById("searchInput");
          const searchTerm = searchInput.value.toLowerCase();
          const resultsContainer = document.getElementById("results");
          resultsContainer.innerHTML = "";

          const filteredFruits = fruits.filter((fruit) => {
            return fruit.title.toLowerCase().includes(searchTerm);
          });

          if (filteredFruits.length > 0) {
            filteredFruits.forEach((fruit) => {
              const div = document.createElement("div");
              div.style.margin = "auto";
              // div.style.backgroundColor = "skyblue";
              div.style.fontSize = "20px";
              div.style.width = "500px";
              div.textContent = fruit.title;
              resultsContainer.appendChild(div);
            });
          } else {
            const p = document.createElement("p");
            p.textContent = "등록된 사이트가 없습니다.";
            resultsContainer.appendChild(p);
          }
        }

        const searchInput = document.getElementById("searchInput");
        searchInput.addEventListener("input", searchFruits);

        function submitSearch() {
  const searchInput = document.getElementById("searchInput");
  const searchTerm = searchInput.value.trim().toLowerCase();

  if (searchTerm !== "") {
    const matchingFruits = fruits.filter((fruit) => {
      return fruit.title.toLowerCase().includes(searchTerm);
    });

    if (matchingFruits.length > 0) {
      const fruitIndex = fruits.indexOf(matchingFruits[0]);
      const url = "http://127.0.0.1:5501/Capstone/front/html/detail" + fruitIndex+".html";
      window.location.href = url;
    } else {
      console.log("검색 결과가 없습니다.");
    }
  }
}

const searchForm = document.querySelector(".detail-search form");
searchForm.addEventListener("submit", function (e) {
  e.preventDefault();
  submitSearch();
});

      </script>

    </div>
    <div id="results" style=""></div>
    <div class="login">
      <a
        href="../html/login.html"
        style="color: aliceblue; text-decoration-line: none"
      >
        로그인 <br
      /></a>
    </div>
    <div class="imsi-sub-frame">
      <div class="pick">
        <span class="imsi-button6">
          <a href="../html/list.html">
            <input type="submit" name="submit" value="GO" id="go" />
          </a>
        </span>
      </div>
      <form>
        <input
          type="text"
          class="search"
          placeholder="     태그 검색 바 (여기서 검색해서 태그 박스 추가할 수 있음)"
        />
        <input
          type="submit"
          name="submit"
          value="검색"
          style="width: 50px; height: 35px"
        />
        <br><br><br>
      </form>
      <div class="imsi-left">
        <div class="imsi-left-content-frame">
          <div class="container" id="button-container">
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script src = "../js/buttoncreate.js"></script>
          </div>
        </div>
      </div>
          <script src = "../js/buttonclick.js"></script>
        </body>
      </html>

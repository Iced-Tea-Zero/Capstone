<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TOOL TOOLS</title>
  <link href="../data/style/list2.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
  <script src="../js/fruits.js"></script>
  <script src="../js/list.js"></script>




</head>

<body>
  <div class="header">
    <div class="header-item">
      <img src="../data/img/logo.png" class="logo" />
    </div>

    <div class="detail-search">
      <form>
        <input
          type="text"
          class="search"
          placeholder="     ì–´ë–¤ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì°¾ê³  ê³„ì‹ ê°€ìš”?ğŸ§"
        />
        <input
          type="submit"
          name="submit"
          value="ê²€ìƒ‰"
          style="width: 50px; height: 35px"
        />
      </form>
    </div>
  </div>

  <div class="login">
    <a
      href="./login.html"
      style="color: aliceblue; text-decoration-line: none"
    >
      ë¡œê·¸ì¸ <br
    /></a>
  </div>

  <h2></h2>

  <table>
    <tr>
      <th class="title-col">Title</th>
      <th class="link-col">Link</th>
      <th class="hashtag-col">Hashtag</th>
    </tr>

    <!-- JSON ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ HTMLë¡œ ë³€í™˜ -->
    <script>
      $(document).ready(function() {
        var filter = localStorage.getItem("filter"); // ê²€ìƒ‰ì–´ë¥¼ localStorageì—ì„œ ê°€ì ¸ì˜´
        var selectedTags = filter.split(", "); // ì„ íƒí•œ í•´ì‹œíƒœê·¸ë¥¼ ì‰¼í‘œì™€ ê³µë°±ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ë°°ì—´ë¡œ ë§Œë“¦

        $.getJSON("../data/sitelink.json", function(data) {
          $("table").empty(); // ê¸°ì¡´ ê²°ê³¼ ì œê±°

          var matchingData = data.filter(function(value) {
            var hashtags = value.hashtag.split(", ");
            return selectedTags.every(function(tag) {
              return hashtags.includes(tag);
            });
          });

          if (matchingData.length > 0) {
            $.each(matchingData, function(key, value) {
              var titleLink = "<a href='detail" + key + ".html'>" + value.title + "</a>";
              $("table").append("<tr><td>" + titleLink + "</td><td><a href='" + value.link + "'>" + value.link + "</a></td><td>" + value.hashtag + "</td></tr>");
            });

            // ì„ íƒí•œ ì œëª© í´ë¦­ ì‹œ í•´ë‹¹ ë§í¬ë¡œ ì´ë™
            $("table").on("click", "a", function(e) {
              e.preventDefault(); // ê¸°ë³¸ ë™ì‘ ì¤‘ë‹¨ (í˜ì´ì§€ ì´ë™ ë°©ì§€)
              var link = $(this).attr("href");
              window.location.href = link; // í´ë¦­í•œ ë§í¬ë¡œ í˜ì´ì§€ ì´ë™
            });
          } else {
            var p = document.createElement("p");
            p.textContent = "ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.";
            $("table").append(p);
          }
        });
      });
    </script>
  </table>

</body>
</html>
